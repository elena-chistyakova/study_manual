### Порядок установки программных продуктов, входящих в комплект поставки

Структура утилиты распознавания обеспечивает пользователям МИС возможность работать со сканером, подключенным к другому компьютеру, что позволяет использовать один сканер для распознавания документов на нескольких рабочих местах. Если используется такая схема работы (сканер и рабочие места пользователей находятся на разных компьютерах), при установке отдельных программных продуктов, входящих в комплект поставки утилиты, необходимо учитывать, какая роль отводится соответствующему рабочему месту.

#### Установка Content AI PassportReader SDK

В первую очередь должна быть выполнена установка программного продукта *Content AI PassportReader SDK* и активации лицензии на него. Установка *Content AI PassportReader SDK* осуществляется на рабочем месте, к которому подключен сканер, который будет использоваться для сканирования документов. Установка должна осуществляться под пользователем с правами администратора, в том числе у пользователя должны быть права доступа к следующим разделам системного реестра:

*	на 32-битных системах: *HKEY_LOCAL_MACHINE\Software\Content AI\PassportReader SDK\1.5* – полный контроль, только для установки;

*	на 64-битных системах: *HKEY_LOCAL_MACHINE\Software\Wow6432Node\Content AI\PassportReader SDK\1.5* – полный контроль только для установки.

Установка  *Content AI PassportReader SDK* может быть выполнена в любой каталог (в том числе в каталог, предлагаемый при установке по умолчанию). 
В процессе установки программа предложит активировать лицензии – далее необходимо следовать инструкциям мастера активации лицензий. Активация лицензий может быть выполнена либо через обращение на почту службы поддержки программного продукта *Content AI PassportReader SDK* (при выборе данного варианта мастер лицензий сформирует письмо автоматически, адрес по умолчанию – activation@contentai.ru), либо через локальный сервис лицензирования (в этом случае в папку сервиса лицензирования необходимо скопировать файл *LicensingSettings.xml*, входящий в комплект поставки).

Перед установкой *Content AI PassportReader SDK* строго рекомендуется ознакомиться с инструкцией по активации лицензии, входящей в комплект поставки.

!!! note
    Если утилиту требуется перенести на другое рабочее место, предварительно необходимо деактивировать лицензию на текущем рабочем месте через службу поддержки программного продукта Content AI PassportReader SDK (support@contentai.ru), и затем, при установке на новом рабочем месте, активировать ее повторно.

#### Установка утилиты Passport Reader

Архитектурное решение утилиты является клиент-серверным, поэтому кроме самого приложения *PassportReader.exe*, в комплект поставки входит серверная часть – служба *PassportReaderService.exe*. В поставляемой папке с утилитой (PassportReader) клиентская и серверная части размещены в двух папках: *Client* и *Service*, соответственно.

##### Установка службы PassportReaderService.exe

Службу *PassportReaderService.exe* необходимо установить на рабочем месте, к которому подключен сканер, который будет использоваться для сканирования документов. В первую очередь необходимо на выбранный для установки компьютер скопировать содержимое папки *PassportReader\Service* из комплекта поставки (каталог размещения может быть произвольным).

Перед инсталляцией службы необходимо произвести ее настройку, которая содержится в файле *PassportReaderService.exe.config*.

Основные настройки службы содержатся в секции <services>. Для примера, название службы: 

`<service behaviorConfiguration="PassportReaderServiceBehavior" name="PassportReader.Service.PassportReaderService">`.

!!! note
    Название службы рекомендуется не изменять, за исключением случаев, когда на компьютере уже не установлена служба с аналогичным названием.

В секции <host> необходимо указать адрес и порт хоста, на который устанавливается служба, например: 

```
<baseAddresses>
    <add baseAddress="http://localhost:8000/PassportReader/PassportReaderService" />
</baseAddresses>
```

где вместо localhost и 8000 указать необходимый IP адрес и номер порта.

По окончании настройки службы сохранить изменения в файле *PassportReaderService.exe.config*. После этого необходимо инсталлировать саму службу (выполнить команду `<Путь к файлу>\PassportReaderService.exe /install`). После завершения процесса инсталляции  найти службу "Passport Reader" в общем списке служб Windows и запустить ее.

#####Установка клиентской части Passport Reader.exe

Клиентская часть утилиты *PassportReader.exe* устанавливается на рабочем месте пользователя. 

Для установки достаточно скопировать папку *PassportReader\Client*, входящую в комплект поставки, в требуемый каталог. Рекомендуется разместить её в каталоге клиентского приложения МИС. Далее необходимо произвести настройку утилиты (после того, как была установлена и запущена служба *PassportReaderService.exe*). 

Настройки производятся в файле *PassportReader.exe.config*. Обязательным является корректное указание адреса службы *PassportReaderService.exe* в секции <endpoint> в формате:

`address="http://localhost:8000/PassportReader/PassportReaderService"`

IP адрес и номер порта должны совпадать с тем, что были указаны в конфигурационном файле службы *PassportReaderService.exe.config*.

Чтобы при выполнении процесса сканирования в автоматическом режиме оно осуществлялось с корректными настройками сканера (разрешение, цветность и т.п.), далее рекомендуется прописать необходимые значения параметров в [файле настройки сканера](./scaner.md) *PassportReader.scanner.config*, входящего в состав утилиты.

Также, если вызов утилиты должен осуществляться непосредственно из МИС, необходимо [настроить кнопку вызова утилиты на экранной форме](./options.md).